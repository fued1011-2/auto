schema {
  query: Query
  mutation: Mutation
}

"Funktionen, um Autodaten zu lesen"
type Query {
  autos(suchparameter: SuchparameterInput): [Auto!]

  auto(id: ID!): Auto
}

"Funktionen, um Autos neu anzulegen, zu aktualisieren oder zu löschen"
type Mutation {
  create(input: AutoInput!): CreatePayload

  update(input: AutoUpdateInput!): UpdatePayload

  delete(id: ID!): DeletePayload

  token(username: String!, password: String!): TokenPayload
  refresh(refreshToken: String!): TokenPayload
}

"Daten zum Fahrzeugschein eines Autos"
type Fahrzeugschein {
  identifikationsNummer: String!
  erstzulassung: String!
  gueltigBis: String!
}

"Datenschema zu einem Auto, das gelesen wird"
type Auto {
  id: ID! # ID ist bei Apollo ein String
  version: Int!
  fin: String!
  rating: Int
  art: Art
  preis: Float!
  verfuegbar: Boolean
  baujahr: String
  homepage: String
  schlagwoerter: [String]
  fahrzeugschein: Fahrzeugschein! # 1:1-Beziehung
  rabatt(short: Boolean): String! # field mit @ResolveField
}

"Enum-Typ für die Art eines Autos"
enum Art {
  SUV
  CABRIO
  LIMOUSINE
  E_AUTO
  KOMBI
  PICKUP
  CROSSOVER
}

"Suchparameter für Autos"
input SuchparameterInput {
  identifikationsNummer: String
  fin: String
  rating: Int
  art: Art
  verfuegbar: Boolean
}

"Daten zum Fahrzeugschein eines neuen Autos"
input FahrzeugscheinInput {
  identifikationsNummer: String!
  erstzulassung: String!
  gueltigBis: String!
}

"Daten zu den Ausstattungen eines Autos"
input AusstattungInput {
  bezeichnung: String!
  beschreibung: String!
  preis: Float!
}

"Daten für ein neues Auto"
input AutoInput {
  fin: String!
  rating: Int
  art: Art
  preis: Float!
  rabatt: Float
  verfuegbar: Boolean
  baujahr: String
  homepage: String
  schlagwoerter: [String]
  fahrzeugschein: FahrzeugscheinInput!
  ausstattungen: [AusstattungInput!]
}

"Generierte ID bei erfolgreichem Neuanlegen"
type CreatePayload {
  id: ID
}

"Daten für ein zu änderndes Auto"
input AutoUpdateInput {
  id: ID
  version: Int
  fin: String
  rating: Int
  art: Art
  preis: Float
  rabatt: Float
  verfuegbar: Boolean
  baujahr: String
  homepage: String
  schlagwoerter: [String]
}

"Neue Versionsnummer als Resultat bei erfolgreichem Aktualisieren"
type UpdatePayload {
  version: Int
}

"Flag, ob das Loeschen durchgefuehrt wurde"
type DeletePayload {
  success: Boolean
}

"Access- und Refresh-Token einschliesslich Ablauf-Zeitstempel"
type TokenPayload {
  access_token: String! # eslint-disable-line @graphql-eslint/naming-convention
  expires_in: Int! # eslint-disable-line @graphql-eslint/naming-convention
  refresh_token: String! # eslint-disable-line @graphql-eslint/naming-convention
  refresh_expires_in: Int! # eslint-disable-line @graphql-eslint/naming-convention
}
